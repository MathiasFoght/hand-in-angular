<section class="card-details" aria-live="polite">
  @if (card$ | async; as card) {
    <header>
      <h2>{{ card.cardholder_name }}</h2>
    </header>

    <p><strong>Card number:</strong> <span>{{ card.card_number }}</span></p>
    <p><strong>Issuer:</strong> <span>{{ card.issuer }}</span></p>
    <p><strong>CSC:</strong> <span>{{ card.csc_code }}</span></p>
    <p>
      <strong>Expires:</strong>
      <span>{{ card.expiration_date_month }}/{{ card.expiration_date_year }}</span>
    </p>

    <button class="btn-danger" (click)="removeCard(card.card_number)">
      Remove card
    </button>

    <div class="transactionsContainer">
      <h3>Completed Transactions</h3>

      @for (t of transactionsForCard; track t.uid) {
        <div class="transaction-row">
          <p><strong>Amount:</strong> {{ t.amount | currency:t.currency }}</p>
          <p><strong>Comment:</strong> {{ t.comment }}</p>
          <p><strong>Date:</strong> {{ t.date | date:'short' }}</p>
          <hr />
        </div>
      }

      @if (transactionsForCard.length === 0) {
        <p>No transactions for this card.</p>
      }
    </div>
  } @else {
    <p>Card could not be found</p>
  }

</section>
